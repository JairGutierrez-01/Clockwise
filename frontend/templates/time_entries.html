<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Time Entries â€“ ClockWise</title>
    <link
      rel="stylesheet"
      href="{{ url_for('static', filename='navbar.css') }}"
    />
    <link
      rel="stylesheet"
      href="{{ url_for('static', filename='dashboard.css') }}"
    />
    <link
      rel="stylesheet"
      href="{{ url_for('static', filename='notifications.css') }}"
    />
    <link
      rel="stylesheet"
      href="{{ url_for('static', filename='time_entries.css') }}"
    />
  </head>
  <body class="dark-mode">
    {% include 'navbar.html' %}
    <main class="notification-container">
      <h1>Time entries from the task "{{ task_title }}"</h1>
      {% if time_entries %}
      <table id="entries-table">
        <thead>
          <tr>
            <th>Date</th>
            <th>Start</th>
            <th>End</th>
            <th>Duration</th>
            <th></th>
          </tr>
        </thead>
        <tbody>
          {% for entry in time_entries %}
          <tr data-entry-id="{{ entry.time_entry_id }}">
            <td class="entry-date">
              {{ entry.start_time.strftime('%Y-%m-%d') }}
            </td>
            <td class="entry-start">
              {{ entry.start_time.strftime('%H:%M:%S') }}
            </td>
            <td class="entry-end">{{ entry.end_time.strftime('%H:%M:%S') }}</td>
            <td class="entry-duration">
              {{ entry.duration_seconds // 3600 }}h {{ (entry.duration_seconds %
              3600) // 60 }}m {{ entry.duration_seconds % 60 }}s
            </td>
            <td>
              <button type="button" class="delete-btn">Delete</button>
              <button type="button" class="edit-btn">Edit</button>
            </td>
          </tr>
          {% endfor %}
        </tbody>
      </table>
      {% else %}
      <p>No time entries for this task.</p>
      {% endif %}
    </main>

    <div id="edit-modal" class="modal hidden">
      <form id="edit-form" class="edit-form">
        <h2>Edit Time Entry</h2>

        <label for="edit-start-time">Start Time</label>
        <input
          type="datetime-local"
          id="edit-start-time"
          name="start_time"
          step="1"
          required
        />

        <label for="edit-end-time">End Time</label>
        <input
          type="datetime-local"
          id="edit-end-time"
          name="end_time"
          step="1"
          required
        />

        <label>Duration</label>
        <div id="edit-duration">00:00:00</div>

        <div class="form-actions">
          <button type="submit" id="save-edit-btn">Save</button>
          <button type="button" id="cancel-edit-btn">Cancel</button>
        </div>
      </form>
    </div>

    <script src="{{ url_for('static', filename='js/theme.js') }}"></script>
    <script src="{{ url_for('static', filename='js/time_entries.js') }}"></script>
    {% if user_logged_in %}
    <script src="{{ url_for('static', filename='js/base.js') }}"></script>
    {% endif %}
  </body>
</html>
